(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["City"],{3722:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("header",{staticClass:"header"},[s("div",{staticClass:"header-icon-search"},["true"==t.GoBack?s("span",[s("van-icon",{attrs:{name:"arrow-left"},on:{click:function(e){return t.$router.go(-1)}}})],1):t._e(),"ele.me"==t.GoBack?s("span",{staticClass:"span"},[t._v("ele.me")]):t._e(),t._t("search")],2),s("div",{staticClass:"address"},[t.Address?s("span",[t._v(t._s(t.Address.cities))]):t._e(),t._t("pois"),"seek"==t.Address?s("span",[t._v("搜索")]):t._e(),t._t("order"),t._t("login"),t._t("profile"),t._t("profile_info"),t._t("download"),t._t("infousername"),t._t("addContent"),t._t("addressadd"),t._t("addDetail"),t._t("forget"),t._t("confirm")],2),s("div",{staticClass:"header-icon-user"},[t._t("head"),t.Head?s("span",[t.usercheack?s("router-link",{attrs:{to:"/profile"}},[s("van-icon",{staticClass:"el-icon-user",attrs:{name:"contact"}})],1):s("router-link",{attrs:{to:"/login"}},[s("span",{staticStyle:{color:"#fff"}},[t._v("登录|注册")])])],1):t._e(),t._t("addRight")],2)])},i=[],n=(s("2f62"),{props:["GoBack","Address","Head"],data:function(){return{usercheack:""}},computed:{},mounted:function(){this.usercheack=this.$store.state.user.user_check}}),c=n,r=(s("6106"),s("2877")),o=Object(r["a"])(c,a,i,!1,null,"7e94d92e",null);e["a"]=o.exports},"428f":function(t,e,s){},6106:function(t,e,s){"use strict";var a=s("e1a2"),i=s.n(a);i.a},d21b:function(t,e,s){"use strict";var a=s("428f"),i=s.n(a);i.a},e1a2:function(t,e,s){},f262:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Shopping"},[s("Header",{attrs:{GoBack:"true",Address:{cities:t.cities.name}}},[s("span",{attrs:{slot:"head"},slot:"head"},[s("router-link",{attrs:{to:"/home",tag:"span"}},[t._v("切换城市")])],1)]),s("main",{staticClass:"main"},[s("div",{staticClass:"city"},[s("div",{staticClass:"city-input"},[s("mt-field",{attrs:{placeholder:"输入学校、商务楼、地址"},model:{value:t.cityval,callback:function(e){t.cityval=e},expression:"cityval"}})],1),s("div",{staticClass:"city-button"},[s("mt-button",{attrs:{type:"primary"},on:{click:function(e){return t.submit()}}},[t._v("提交")])],1)]),1==t.search?s("div",{staticClass:"search"},[s("p",[t._v("很抱歉！无搜索结果")])]):t._e(),t.search.length>0?s("div",{staticClass:"getpois_ul"},[s("ul",t._l(t.search,function(e,a){return s("li",{key:a,on:{click:function(s){return t.CitygoMsite(e)}}},[s("p",[t._v(t._s(e.name))]),s("span",[t._v(t._s(e.address))])])}),0)]):t._e(),0==t.search.length?s("div",[t._m(0),t.getpois.length>0?s("div",{staticClass:"getpois"},[s("ul",t._l(t.getpois,function(e,a){return s("li",{key:a,on:{click:function(s){return t.CitygoMsite(e)}}},[s("p",[t._v(t._s(e.name))]),s("span",[t._v(t._s(e.address))])])}),0),s("div",{staticClass:"del",on:{click:function(e){return t.del()}}},[t._v("清空所有")])]):t._e()]):t._e()])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pois"},[s("p",[t._v("搜索历史")])])}],n=s("75fc"),c=s("3722"),r={data:function(){return{cityval:"",cities:[],search:[],getpois:[]}},components:{Header:c["a"]},methods:{submit:function(){var t=this;if(""==this.cityval)this.$dialog.alert({message:"内容不能为空"});else{var e=this.$route.params.id;this.$http.get("http://elm.cangdu.org/v1/pois?type=search&city_id=".concat(e,"&keyword=").concat(this.cityval)).then(function(e){0==e.data.length&&(e.data=1),t.search=e.data})}},CitygoMsite:function(t){var e=Object(n["a"])(this.getpois),s=e.some(function(e){return e.geohash==t.geohash});0==s&&e.push(t),localStorage.setItem("placeHistory",JSON.stringify(e)),this.getpois=e,this.$store.commit("setGeohash",t.geohash),this.$router.push({path:"/msite",query:{geohash:t.geohash}})},del:function(){this.getpois=[],localStorage.removeItem("placeHistory")}},mounted:function(){var t=this,e=this.$route.params.id;this.$http.get("http://elm.cangdu.org/v1/cities/".concat(e)).then(function(e){t.cities=e.data});var s=JSON.parse(localStorage.getItem("placeHistory"));s&&(this.getpois=s)}},o=r,l=(s("d21b"),s("2877")),u=Object(l["a"])(o,a,i,!1,null,"43a7e5eb",null);e["default"]=u.exports}}]);
//# sourceMappingURL=City.3c328247.js.map